<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Interactive Periodic Table</title>
  <meta name="description" content="Free, interactive periodic table with IUPAC long-form layout, search, category filters, Wikipedia links, and solubility table."/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root{
      --bg: #0b1020;
      --card: #111830;
      --muted: #6e7a9a;
      --text: #e7ecff;
      --accent: #5ea0ff;
      --border: #26304d;
      --highlight: #ffd166;
      --success:#22c55e;
      --danger: #ef4444;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --transition-speed: 0.3s;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      background: radial-gradient(1200px 700px at 10% -10%, #1a2140 0%, transparent 60%),
                  radial-gradient(900px 600px at 110% 10%, #111a34 0%, transparent 60%), var(--bg);
      color:var(--text);
      overflow-x: hidden;
    }
    header{
      position:sticky;top:0;z-index:20;
      backdrop-filter: blur(8px);
      background: linear-gradient(180deg, rgba(11,16,32,.9), rgba(11,16,32,.6));
      border-bottom:1px solid var(--border);
      transition: all var(--transition-speed);
    }
    .wrap{max-width:1200px;margin:0 auto;padding:16px}
    .toolbar{display:grid;grid-template-columns: 1fr auto auto auto;gap:10px;align-items:center}
    h1{font-size:clamp(18px,2.6vw,28px);margin:0}
    .pill{display:flex;align-items:center;gap:8px;background:var(--card);border:1px solid var(--border);padding:10px 12px;border-radius:14px;box-shadow:var(--shadow); transition: all var(--transition-speed);}
    input[type="search"]{all:unset;width:100%;}
    select,button{appearance:none;background:var(--card);color:var(--text);border:1px solid var(--border);padding:10px 12px;border-radius:14px;cursor:pointer;box-shadow:var(--shadow); transition: all var(--transition-speed);}
    button:hover,select:hover{border-color:#35519c; transform: translateY(-2px);}
    .content{display:grid;grid-template-columns: 1fr 320px; gap:16px;align-items:start;padding:16px}
    .table{background:linear-gradient(180deg,rgba(255,255,255,.02),transparent);border:1px solid var(--border);border-radius:18px;padding:12px;box-shadow:var(--shadow); position: relative; overflow: hidden;}
    .grid{display:grid;grid-template-columns: repeat(18, minmax(40px, 1fr));grid-auto-rows: 64px;gap:6px}
    .cell{position:relative;border:1px solid transparent;border-radius:12px;display:flex;align-items:center;justify-content:center}
    .el{position:relative;height:100%;width:100%;border-radius:12px;padding:6px;border:1px solid var(--border);background:var(--card);display:grid;grid-template-rows:auto 1fr auto;gap:4px;transition:.3s transform, .3s border-color, .3s box-shadow, .3s filter, .3s opacity; cursor: pointer; transform-style: preserve-3d;}
    .el:hover{transform:translateY(-4px) scale(1.05) rotateX(5deg);border-color:#335fb8;box-shadow:0 12px 20px rgba(0,0,0,.5); z-index: 10;}
    .el .num{font-size:11px;color:var(--muted);}
    .el .sym{font-weight:800;font-size:18px;letter-spacing:.5px}
    .el .name{font-size:10px;color:var(--muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .empty{opacity:.15}

    /* Category colors */
    .c-alkali{background:linear-gradient(180deg, rgba(255,99,72,.14), rgba(255,99,72,.04));}
    .c-alkaline-earth{background:linear-gradient(180deg, rgba(255,159,67,.14), rgba(255,159,67,.04));}
    .c-transition{background:linear-gradient(180deg, rgba(255,206,86,.14), rgba(255,206,86,.04));}
    .c-post-transition,.c-metalloids{background:linear-gradient(180deg, rgba(75,192,192,.14), rgba(75,192,192,.04));}
    .c-nonmetals{background:linear-gradient(180deg, rgba(54,162,235,.14), rgba(54,162,235,.04));}
    .c-halogen{background:linear-gradient(180deg, rgba(153,102,255,.14), rgba(153,102,255,.04));}
    .c-noble{background:linear-gradient(180deg, rgba(201,  90,255,.14), rgba(201,  90,255,.04));}
    .c-lanth{background:linear-gradient(180deg, rgba(255, 205, 210,.14), rgba(255,205,210,.04));}
    .c-act{background:linear-gradient(180deg, rgba(244, 143, 177,.14), rgba(244,143,177,.04));}
    .c-semi{background:linear-gradient(180deg, rgba(100, 181, 246,.14), rgba(100,181,246,.04));}

    /* Animation for element selection */
    .el.selected{animation: pulse 1.5s infinite; box-shadow: 0 0 20px rgba(255, 209, 102, 0.6);}
    @keyframes pulse {
      0% { box-shadow: 0 0 10px rgba(255, 209, 102, 0.4); }
      50% { box-shadow: 0 0 20px rgba(255, 209, 102, 0.8); }
      100% { box-shadow: 0 0 10px rgba(255, 209, 102, 0.4); }
    }

    /* Legend styles */
    .legend{display:flex;flex-wrap:wrap;gap:8px;margin-top:8px}
    .tag{padding:6px 10px;border-radius:999px;border:1px solid var(--border);background:var(--card);font-size:12px; transition: all var(--transition-speed); cursor: pointer;}
    .tag:hover{transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.2);}
    .tag.active{background: var(--accent); color: var(--bg);}

    /* Side panel styles */
    .side{position:sticky;top:84px;background:var(--card);border:1px solid var(--border);border-radius:18px;box-shadow:var(--shadow); transition: all var(--transition-speed);}
    .side header{position:static;background:none;border:none}
    .side .media{width:100%;aspect-ratio:16/10;background:#0e1430;border-bottom:1px solid var(--border);border-top-left-radius:18px;border-top-right-radius:18px;display:grid;place-items:center;overflow:hidden; position: relative;}
    .side img{width:100%;height:100%;object-fit:cover; transition: transform 0.5s ease;}
    .side .ph{font-size:64px;opacity:.3}
    .side .info{padding:16px}
    .kv{display:grid;grid-template-columns: 1fr 1fr;gap:8px;margin-top:10px}
    .kv div{background:rgba(255,255,255,.04);border:1px solid var(--border);padding:8px;border-radius:12px; transition: all var(--transition-speed);}
    .kv div:hover{transform: translateY(-2px); background: rgba(255,255,255,.08);}
    .kv b{display:block;font-size:12px;color:var(--muted);font-weight:600}

    .actions{display:flex;gap:8px;margin-top:12px}
    .actions a, .actions button{flex:1;text-align:center}

    .footer{padding:10px;color:var(--muted);font-size:12px;text-align:center}

    /* Modal styles */
    dialog{background:var(--card);color:var(--text);border:1px solid var(--border);border-radius:16px;box-shadow:var(--shadow);max-width:900px;width:90%; opacity: 0; transform: scale(0.9); transition: all 0.3s ease;}
    dialog[open]{opacity: 1; transform: scale(1);}
    dialog::backdrop{background:rgba(5,10,20,.6); backdrop-filter: blur(4px);}
    .modal-head{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid var(--border);padding:12px 16px}
    .modal-body{padding:16px}
    .table-sol{width:100%;border-collapse:collapse}
    .table-sol th, .table-sol td{border-bottom:1px solid var(--border);padding:8px;text-align:left; transition: all var(--transition-speed);}
    .table-sol tr:hover td{background: rgba(255,255,255,0.05);}
    .badge{display:inline-block;border:1px solid var(--border);padding:2px 8px;border-radius:999px;font-size:12px}

    /* Particle animation */
    .particles{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:-1;overflow:hidden;border-radius:18px;}
    .particle{position:absolute;background:var(--accent);border-radius:50%;opacity:0;}

    /* Toast notification */
    .toast{position:fixed;left:50%;bottom:20px;transform:translateX(-50%) translateY(100px);background:rgba(20,30,60,.95);color:white;padding:10px 14px;border:1px solid var(--border);border-radius:999px;z-index:9999;box-shadow: var(--shadow);transition: transform 0.3s ease;}

    /* Loading animation */
    .loading{display:inline-block;width:20px;height:20px;border:3px solid rgba(255,255,255,.3);border-radius:50%;border-top-color:var(--accent);animation:spin 1s ease-in-out infinite;}
    @keyframes spin{to{transform:rotate(360deg)}}

    /* Responsive design */
    @media (max-width: 980px){
      .content{grid-template-columns:1fr}
      .toolbar{grid-template-columns:1fr 1fr 1fr;grid-auto-rows: auto}
      .toolbar h1{grid-column:1/-1}
      .side{position:relative;top:auto}
    }

    /* Animation for initial load */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .animate-fadein {
      animation: fadeIn 0.6s ease forwards;
    }

    /* Animation for grid elements */
    @keyframes elementAppear {
      0% { opacity: 0; transform: scale(0.8) rotateY(90deg); }
      100% { opacity: 1; transform: scale(1) rotateY(0); }
    }
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <div class="toolbar">
        <h1>Periodic Table (IUPAC Long Form)</h1>
        <label class="pill" title="Search by name, symbol, or atomic number">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
          <input id="search" type="search" placeholder="Search elements… (e.g., Fe, Iron, 26)" />
        </label>
        <select id="category">
          <option value="">All categories</option>
          <option value="alkali">Alkali metals</option>
          <option value="alkaline-earth">Alkaline earth metals</option>
          <option value="transition">Transition metals</option>
          <option value="post-transition">Post-transition metals</option>
          <option value="metalloids">Metalloids</option>
          <option value="nonmetals">Other nonmetals</option>
          <option value="halogen">Halogens</option>
          <option value="noble">Noble gases</option>
          <option value="lanth">Lanthanides</option>
          <option value="act">Actinides</option>
          <option value="semi">Semiconductor</option>
        </select>
        <div style="display:flex;gap:8px">
          <button id="btn-sol">Table of Solubility</button>
          <button id="btn-reset" title="Clear filters">Reset</button>
        </div>
      </div>
      <div class="legend" id="legend"></div>
    </div>
  </header>

  <main class="wrap content">
    <section class="table">
      <div class="particles" id="particles"></div>
      <div class="grid" id="grid"></div>
      <div class="footer">Tip: Use ⌨️ keyboard (arrows/Enter/Esc) to navigate. Click any element for details.</div>
    </section>

    <aside class="side" id="side">
      <div class="media" id="media"><div class="ph">🧪</div></div>
      <div class="info">
        <h2 id="el-title" style="margin:0 0 6px">Select an element</h2>
        <p id="el-summary" style="margin:0;color:var(--muted)">Tap an element to see details, image, and quick links.</p>
        <div class="kv" id="kv"></div>
        <div class="actions">
          <a id="wiki" class="pill" target="_blank" rel="noopener">Open Wikipedia</a>
          <button id="copy" class="pill" title="Copy summary">Copy</button>
        </div>
      </div>
    </aside>
  </main>

  <dialog id="sol-modal">
    <div class="modal-head">
      <h3 style="margin:0">Table of Solubility</h3>
      <button id="sol-close">Close</button>
    </div>
    <div class="modal-body">
      <p style="color:var(--muted);margin-top:0">General solubility guidelines for common inorganic salts in water at ~25°C. Always consult detailed tables for precise values.</p>
      <table class="table-sol" id="sol-table"></table>
    </div>
  </dialog>

  <script>
  // --- Element dataset (compact) ---
  // Each entry: {Z,sym,name,cat,grp,per,x,y,mass}
  // y (row) and x (column) are long-form positions (18 groups wide).
  const ELEMENTS = [
    {Z:1,sym:'H',name:'Hydrogen',cat:'nonmetals',grp:1,per:1,x:1,y:1,mass:1.008},
    {Z:2,sym:'He',name:'Helium',cat:'noble',grp:18,per:1,x:18,y:1,mass:4.0026},
    {Z:3,sym:'Li',name:'Lithium',cat:'alkali',grp:1,per:2,x:1,y:2,mass:6.94},
    {Z:4,sym:'Be',name:'Beryllium',cat:'alkaline-earth',grp:2,per:2,x:2,y:2,mass:9.0122},
    {Z:5,sym:'B',name:'Boron',cat:'metalloids',grp:13,per:2,x:13,y:2,mass:10.81},
    {Z:6,sym:'C',name:'Carbon',cat:'nonmetals',grp:14,per:2,x:14,y:2,mass:12.011},
    {Z:7,sym:'N',name:'Nitrogen',cat:'nonmetals',grp:15,per:2,x:15,y:2,mass:14.007},
    {Z:8,sym:'O',name:'Oxygen',cat:'nonmetals',grp:16,per:2,x:16,y:2,mass:15.999},
    {Z:9,sym:'F',name:'Fluorine',cat:'halogen',grp:17,per:2,x:17,y:2,mass:18.998},
    {Z:10,sym:'Ne',name:'Neon',cat:'noble',grp:18,per:2,x:18,y:2,mass:20.18},

    {Z:11,sym:'Na',name:'Sodium',cat:'alkali',grp:1,per:3,x:1,y:3,mass:22.99},
    {Z:12,sym:'Mg',name:'Magnesium',cat:'alkaline-earth',grp:2,per:3,x:2,y:3,mass:24.305},
    {Z:13,sym:'Al',name:'Aluminium',cat:'post-transition',grp:13,per:3,x:13,y:3,mass:26.982},
    {Z:14,sym:'Si',name:'Silicon',cat:'metalloids',grp:14,per:3,x:14,y:3,mass:28.085},
    {Z:15,sym:'P',name:'Phosphorus',cat:'nonmetals',grp:15,per:3,x:15,y:3,mass:30.974},
    {Z:16,sym:'S',name:'Sulfur',cat:'nonmetals',grp:16,per:3,x:16,y:3,mass:32.06},
    {Z:17,sym:'Cl',name:'Chlorine',cat:'halogen',grp:17,per:3,x:17,y:3,mass:35.45},
    {Z:18,sym:'Ar',name:'Argon',cat:'noble',grp:18,per:3,x:18,y:3,mass:39.948},

    {Z:19,sym:'K',name:'Potassium',cat:'alkali',grp:1,per:4,x:1,y:4,mass:39.098},
    {Z:20,sym:'Ca',name:'Calcium',cat:'alkaline-earth',grp:2,per:4,x:2,y:4,mass:40.078},
    {Z:21,sym:'Sc',name:'Scandium',cat:'transition',grp:3,per:4,x:3,y:4,mass:44.956},
    {Z:22,sym:'Ti',name:'Titanium',cat:'transition',grp:4,per:4,x:4,y:4,mass:47.867},
    {Z:23,sym:'V',name:'Vanadium',cat:'transition',grp:5,per:4,x:5,y:4,mass:50.942},
    {Z:24,sym:'Cr',name:'Chromium',cat:'transition',grp:6,per:4,x:6,y:4,mass:51.996},
    {Z:25,sym:'Mn',name:'Manganese',cat:'transition',grp:7,per:4,x:7,y:4,mass:54.938},
    {Z:26,sym:'Fe',name:'Iron',cat:'transition',grp:8,per:4,x:8,y:4,mass:55.845},
    {Z:27,sym:'Co',name:'Cobalt',cat:'transition',grp:9,per:4,x:9,y:4,mass:58.933},
    {Z:28,sym:'Ni',name:'Nickel',cat:'transition',grp:10,per:4,x:10,y:4,mass:58.693},
    {Z:29,sym:'Cu',name:'Copper',cat:'transition',grp:11,per:4,x:11,y:4,mass:63.546},
    {Z:30,sym:'Zn',name:'Zinc',cat:'transition',grp:12,per:4,x:12,y:4,mass:65.38},
    {Z:31,sym:'Ga',name:'Gallium',cat:'post-transition',grp:13,per:4,x:13,y:4,mass:69.723},
    {Z:32,sym:'Ge',name:'Germanium',cat:'metalloids',grp:14,per:4,x:14,y:4,mass:72.63},
    {Z:33,sym:'As',name:'Arsenic',cat:'metalloids',grp:15,per:4,x:15,y:4,mass:74.922},
    {Z:34,sym:'Se',name:'Selenium',cat:'nonmetals',grp:16,per:4,x:16,y:4,mass:78.971},
    {Z:35,sym:'Br',name:'Bromine',cat:'halogen',grp:17,per:4,x:17,y:4,mass:79.904},
    {Z:36,sym:'Kr',name:'Krypton',cat:'noble',grp:18,per:4,x:18,y:4,mass:83.798},

    {Z:37,sym:'Rb',name:'Rubidium',cat:'alkali',grp:1,per:5,x:1,y:5,mass:85.468},
    {Z:38,sym:'Sr',name:'Strontium',cat:'alkaline-earth',grp:2,per:5,x:2,y:5,mass:87.62},
    {Z:39,sym:'Y',name:'Yttrium',cat:'transition',grp:3,per:5,x:3,y:5,mass:88.906},
    {Z:40,sym:'Zr',name:'Zirconium',cat:'transition',grp:4,per:5,x:4,y:5,mass:91.224},
    {Z:41,sym:'Nb',name:'Niobium',cat:'transition',grp:5,per:5,x:5,y:5,mass:92.906},
    {Z:42,sym:'Mo',name:'Molybdenum',cat:'transition',grp:6,per:5,x:6,y:5,mass:95.95},
    {Z:43,sym:'Tc',name:'Technetium',cat:'transition',grp:7,per:5,x:7,y:5,mass:98},
    {Z:44,sym:'Ru',name:'Ruthenium',cat:'transition',grp:8,per:5,x:8,y:5,mass:101.07},
    {Z:45,sym:'Rh',name:'Rhodium',cat:'transition',grp:9,per:5,x:9,y:5,mass:102.91},
    {Z:46,sym:'Pd',name:'Palladium',cat:'transition',grp:10,per:5,x:10,y:5,mass:106.42},
    {Z:47,sym:'Ag',name:'Silver',cat:'transition',grp:11,per:5,x:11,y:5,mass:107.87},
    {Z:48,sym:'Cd',name:'Cadmium',cat:'transition',grp:12,per:5,x:12,y:5,mass:112.41},
    {Z:49,sym:'In',name:'Indium',cat:'post-transition',grp:13,per:5,x:13,y:5,mass:114.82},
    {Z:50,sym:'Sn',name:'Tin',cat:'post-transition',grp:14,per:5,x:14,y:5,mass:118.71},
    {Z:51,sym:'Sb',name:'Antimony',cat:'metalloids',grp:15,per:5,x:15,y:5,mass:121.76},
    {Z:52,sym:'Te',name:'Tellurium',cat:'metalloids',grp:16,per:5,x:16,y:5,mass:127.60},
    {Z:53,sym:'I',name:'Iodine',cat:'halogen',grp:17,per:5,x:17,y:5,mass:126.90},
    {Z:54,sym:'Xe',name:'Xenon',cat:'noble',grp:18,per:5,x:18,y:5,mass:131.29},

    {Z:55,sym:'Cs',name:'Caesium',cat:'alkali',grp:1,per:6,x:1,y:6,mass:132.91},
    {Z:56,sym:'Ba',name:'Barium',cat:'alkaline-earth',grp:2,per:6,x:2,y:6,mass:137.33},
    {Z:57,sym:'La',name:'Lanthanum',cat:'lanth',grp:3,per:6,x:3,y:6,mass:138.91},
    {Z:58,sym:'Ce',name:'Cerium',cat:'lanth',grp:3,per:6,x:4,y:9,mass:140.12},
    {Z:59,sym:'Pr',name:'Praseodymium',cat:'lanth',x:5,y:9,mass:140.91},
    {Z:60,sym:'Nd',name:'Neodymium',cat:'lanth',x:6,y:9,mass:144.24},
    {Z:61,sym:'Pm',name:'Promethium',cat:'lanth',x:7,y:9,mass:145},
    {Z:62,sym:'Sm',name:'Samarium',cat:'lanth',x:8,y:9,mass:150.36},
    {Z:63,sym:'Eu',name:'Europium',cat:'lanth',x:9,y:9,mass:151.96},
    {Z:64,sym:'Gd',name:'Gadolinium',cat:'lanth',x:10,y:9,mass:157.25},
    {Z:65,sym:'Tb',name:'Terbium',cat:'lanth',x:11,y:9,mass:158.93},
    {Z:66,sym:'Dy',name:'Dysprosium',cat:'lanth',x:12,y:9,mass:162.50},
    {Z:67,sym:'Ho',name:'Holmium',cat:'lanth',x:13,y:9,mass:164.93},
    {Z:68,sym:'Er',name:'Erbium',cat:'lanth',x:14,y:9,mass:167.26},
    {Z:69,sym:'Tm',name:'Thulium',cat:'lanth',x:15,y:9,mass:168.93},
    {Z:70,sym:'Yb',name:'Ytterbium',cat:'lanth',x:16,y:9,mass:173.05},
    {Z:71,sym:'Lu',name:'Lutetium',cat:'lanth',grp:3,per:6,x:17,y:9,mass:174.97},

    {Z:72,sym:'Hf',name:'Hafnium',cat:'transition',grp:4,per:6,x:4,y:6,mass:178.49},
    {Z:73,sym:'Ta',name:'Tantalum',cat:'transition',grp:5,per:6,x:5,y:6,mass:180.95},
    {Z:74,sym:'W',name:'Tungsten',cat:'transition',grp:6,per:6,x:6,y:6,mass:183.84},
    {Z:75,sym:'Re',name:'Rhenium',cat:'transition',grp:7,per:6,x:7,y:6,mass:186.21},
    {Z:76,sym:'Os',name:'Osmium',cat:'transition',grp:8,per:6,x:8,y:6,mass:190.23},
    {Z:77,sym:'Ir',name:'Iridium',cat:'transition',grp:9,per:6,x:9,y:6,mass:192.22},
    {Z:78,sym:'Pt',name:'Platinum',cat:'transition',grp:10,per:6,x:10,y:6,mass:195.08},
    {Z:79,sym:'Au',name:'Gold',cat:'transition',grp:11,per:6,x:11,y:6,mass:196.97},
    {Z:80,sym:'Hg',name:'Mercury',cat:'transition',grp:12,per:6,x:12,y:6,mass:200.59},
    {Z:81,sym:'Tl',name:'Thallium',cat:'post-transition',grp:13,per:6,x:13,y:6,mass:204.38},
    {Z:82,sym:'Pb',name:'Lead',cat:'post-transition',grp:14,per:6,x:14,y:6,mass:207.2},
    {Z:83,sym:'Bi',name:'Bismuth',cat:'post-transition',grp:15,per:6,x:15,y:6,mass:208.98},
    {Z:84,sym:'Po',name:'Polonium',cat:'metalloids',grp:16,per:6,x:16,y:6,mass:209},
    {Z:85,sym:'At',name:'Astatine',cat:'halogen',grp:17,per:6,x:17,y:6,mass:210},
    {Z:86,sym:'Rn',name:'Radon',cat:'noble',grp:18,per:6,x:18,y:6,mass:222},

    {Z:87,sym:'Fr',name:'Francium',cat:'alkali',grp:1,per:7,x:1,y:7,mass:223},
    {Z:88,sym:'Ra',name:'Radium',cat:'alkaline-earth',grp:2,per:7,x:2,y:7,mass:226},
    {Z:89,sym:'Ac',name:'Actinium',cat:'act',grp:3,per:7,x:3,y:7,mass:227},
    {Z:90,sym:'Th',name:'Thorium',cat:'act',x:4,y:10,mass:232.04},
    {Z:91,sym:'Pa',name:'Protactinium',cat:'act',x:5,y:10,mass:231.04},
    {Z:92,sym:'U',name:'Uranium',cat:'act',x:6,y:10,mass:238.03},
    {Z:93,sym:'Np',name:'Neptunium',cat:'act',x:7,y:10,mass:237},
    {Z:94,sym:'Pu',name:'Plutonium',cat:'act',x:8,y:10,mass:244},
    {Z:95,sym:'Am',name:'Americium',cat:'act',x:9,y:10,mass:243},
    {Z:96,sym:'Cm',name:'Curium',cat:'act',x:10,y:10,mass:247},
    {Z:97,sym:'Bk',name:'Berkelium',cat:'act',x:11,y:10,mass:247},
    {Z:98,sym:'Cf',name:'Californium',cat:'act',x:12,y:10,mass:251},
    {Z:99,sym:'Es',name:'Einsteinium',cat:'act',x:13,y:10,mass:252},
    {Z:100,sym:'Fm',name:'Fermium',cat:'act',x:14,y:10,mass:257},
    {Z:101,sym:'Md',name:'Mendelevium',cat:'act',x:15,y:10,mass:258},
    {Z:102,sym:'No',name:'Nobelium',cat:'act',x:16,y:10,mass:259},
    {Z:103,sym:'Lr',name:'Lawrencium',cat:'act',x:17,y:10,mass:266},

    {Z:104,sym:'Rf',name:'Rutherfordium',cat:'transition',grp:4,per:7,x:4,y:7,mass:267},
    {Z:105,sym:'Db',name:'Dubnium',cat:'transition',grp:5,per:7,x:5,y:7,mass:268},
    {Z:106,sym:'Sg',name:'Seaborgium',cat:'transition',grp:6,per:7,x:6,y:7,mass:269},
    {Z:107,sym:'Bh',name:'Bohrium',cat:'transition',grp:7,per:7,x:7,y:7,mass:270},
    {Z:108,sym:'Hs',name:'Hassium',cat:'transition',grp:8,per:7,x:8,y:7,mass:277},
    {Z:109,sym:'Mt',name:'Meitnerium',cat:'transition',grp:9,per:7,x:9,y:7,mass:278},
    {Z:110,sym:'Ds',name:'Darmstadtium',cat:'transition',grp:10,per:7,x:10,y:7,mass:281},
    {Z:111,sym:'Rg',name:'Roentgenium',cat:'transition',grp:11,per:7,x:11,y:7,mass:282},
    {Z:112,sym:'Cn',name:'Copernicium',cat:'transition',grp:12,per:7,x:12,y:7,mass:285},
    {Z:113,sym:'Nh',name:'Nihonium',cat:'post-transition',grp:13,per:7,x:13,y:7,mass:286},
    {Z:114,sym:'Fl',name:'Flerovium',cat:'post-transition',grp:14,per:7,x:14,y:7,mass:289},
    {Z:115,sym:'Mc',name:'Moscovium',cat:'post-transition',grp:15,per:7,x:15,y:7,mass:290},
    {Z:116,sym:'Lv',name:'Livermorium',cat:'post-transition',grp:16,per:7,x:16,y:7,mass:293},
    {Z:117,sym:'Ts',name:'Tennessine',cat:'halogen',grp:17,per:7,x:17,y:7,mass:294},
    {Z:118,sym:'Og',name:'Oganesson',cat:'noble',grp:18,per:7,x:18,y:7,mass:294}
  ];

  // Build a quick index by (x,y) to place cells
  const grid = document.getElementById('grid');
  const legend = document.getElementById('legend');
  const particlesContainer = document.getElementById('particles');
  const side = {
    media: document.getElementById('media'),
    title: document.getElementById('el-title'),
    sum: document.getElementById('el-summary'),
    kv: document.getElementById('kv'),
    wiki: document.getElementById('wiki')
  };

  const CATEGORY_META = {
    'alkali': {label:'Alkali metals', cls:'c-alkali'},
    'alkaline-earth': {label:'Alkaline earth metals', cls:'c-alkaline-earth'},
    'transition': {label:'Transition metals', cls:'c-transition'},
    'post-transition': {label:'Post-transition metals', cls:'c-post-transition'},
    'metalloids': {label:'Metalloids', cls:'c-metalloids'},
    'nonmetals': {label:'Other nonmetals', cls:'c-nonmetals'},
    'halogen': {label:'Halogens', cls:'c-halogen'},
    'noble': {label:'Noble gases', cls:'c-noble'},
    'lanth': {label:'Lanthanides', cls:'c-lanth'},
    'act': {label:'Actinides', cls:'c-act'},
    'semi': {label:'Semiconductor', cls:'c-semi'}
  };

  // Animation functions
  function createParticles(x, y, color, count = 15) {
    for (let i = 0; i < count; i++) {
      const particle = document.createElement('div');
      particle.className = 'particle';
      particle.style.width = `${Math.random() * 4 + 2}px`;
      particle.style.height = particle.style.width;
      particle.style.left = `${x}px`;
      particle.style.top = `${y}px`;
      particle.style.background = color || getRandomColor();
      particle.style.setProperty('--tx', `${(Math.random() - 0.5) * 100}px`);
      particle.style.setProperty('--ty', `${(Math.random() - 0.5) * 100}px`);
      
      particlesContainer.appendChild(particle);
      
      // Animate particle
      const duration = Math.random() * 1000 + 500;
      particle.animate([
        { transform: 'translate(0, 0)', opacity: 1 },
        { transform: 'translate(var(--tx), var(--ty))', opacity: 0 }
      ], {
        duration: duration,
        easing: 'cubic-bezier(0.1, 0.3, 0.2, 1)'
      });
      
      // Remove particle after animation
      setTimeout(() => {
        if (particle.parentNode) {
          particle.parentNode.removeChild(particle);
        }
      }, duration);
    }
  }

  function getRandomColor() {
    const colors = ['#5ea0ff', '#ffd166', '#22c55e', '#ef4444', '#9c5dff'];
    return colors[Math.floor(Math.random() * colors.length)];
  }

  function makeLegend(){
    legend.innerHTML = '';
    Object.entries(CATEGORY_META).forEach(([k,v])=>{
      const span = document.createElement('span');
      span.className='tag';
      span.textContent = v.label;
      span.dataset.category = k;
      span.addEventListener('click', () => {
        document.querySelectorAll('.tag').forEach(t => t.classList.remove('active'));
        span.classList.add('active');
        category.value = k;
        applyFilters();
      });
      legend.appendChild(span);
    });
  }

  function cellHTML(e){
    const cls = CATEGORY_META[e.cat]?.cls || '';
    return `<button class="el ${cls}" data-z="${e.Z}" title="${e.name}">
      <div class="num">${e.Z}</div>
      <div class="sym">${e.sym}</div>
      <div class="name">${e.name}</div>
    </button>`
  }

  function renderGrid(filter={}){
    const {q='',cat=''} = filter;
    grid.innerHTML='';
    const width = 18, height = 10; // includes two f-block rows
    // Fill empty cells first
    for(let row=1; row<=height; row++){
      for(let col=1; col<=width; col++){
        const d = document.createElement('div');
        d.className='cell';
        d.dataset.x = col; d.dataset.y = row;
        grid.appendChild(d);
      }
    }
    const matches = new Set();
    const qlc = q.trim().toLowerCase();

    const filtered = ELEMENTS.filter(e=>{
      const catOk = cat ? e.cat===cat : true;
      const qOk = !qlc ? true : (
        e.name.toLowerCase().includes(qlc) ||
        e.sym.toLowerCase()===qlc || String(e.Z)===qlc
      );
      const ok = catOk && qOk;
      if(ok) matches.add(e.Z);
      return ok;
    });

    // Place all elements (including those that don't match, but dim them if a filter is active)
    ELEMENTS.forEach(e=>{
      const idx = (e.y-1)*18 + (e.x-1);
      const host = grid.children[idx];
      if(!host) return;
      host.innerHTML = cellHTML(e);
      const btn = host.firstElementChild;
      
      // Add animation delay based on position
      btn.style.animationDelay = `${(e.x + e.y) * 20}ms`;
      btn.style.animation = 'elementAppear 0.5s ease forwards';
      
      if((q || cat) && !matches.has(e.Z)){
        btn.style.opacity = .25;
        btn.style.filter = 'grayscale(70%)';
      }
      btn.addEventListener('click',(event)=>{
        const rect = event.target.getBoundingClientRect();
        createParticles(rect.left + rect.width/2, rect.top + rect.height/2);
        selectElement(e.Z,true);
      });
    });
  }

  function wikiHref(name){
    const safe = name.replace(/ /g,'_');
    return `https://en.wikipedia.org/wiki/${safe}`;
  }

  function elementImage(e){
    // Try a known public domain sprite set (symbol-based). Fallback to placeholder.
    const url = `https://cdn.jsdelivr.net/gh/Bowserinator/Periodic-Table-JSON@master/images/${e.sym}.png`;
    return url;
  }

  function selectElement(Z, focus=false){
    const e = ELEMENTS.find(x=>x.Z===Z);
    if(!e) return;
    
    // Remove previous selection
    document.querySelectorAll('.el.selected').forEach(el => {
      el.classList.remove('selected');
    });
    
    // Highlight selected
    document.querySelectorAll('.el').forEach(el=>{
      el.style.outline='none';
    });
    const idx = (e.y-1)*18 + (e.x-1);
    const host = grid.children[idx];
    if(host){ 
      const btn = host.firstElementChild;
      btn.style.outline = `2px solid var(--highlight)`;
      btn.classList.add('selected');
    }

    // Side panel content with animation
    side.title.textContent = `${e.name} (${e.sym})`;
    side.sum.textContent = `Atomic number ${e.Z} • Group ${e.grp||'—'} • Period ${e.per||'—'} • Relative atomic mass ${e.mass}`;
    side.kv.innerHTML = '';
    side.kv.append(
      kvItem('Category', CATEGORY_META[e.cat]?.label || e.cat || '—'),
      kvItem('Symbol', e.sym),
      kvItem('Atomic #', e.Z),
      kvItem('Group', e.grp ?? '—'),
      kvItem('Period', e.per ?? '—'),
      kvItem('Atomic mass', e.mass)
    );
    
    // Animate side panel
    side.media.style.opacity = '0';
    setTimeout(() => {
      const img = new Image();
      img.src = elementImage(e);
      img.alt = `${e.name}`;
      img.onerror = ()=>{ 
        side.media.innerHTML = '<div class="ph">🧪</div>'; 
        side.media.style.opacity = '1';
      };
      img.onload = ()=>{ 
        side.media.innerHTML=''; 
        side.media.appendChild(img); 
        side.media.style.opacity = '1';
      };
    }, 300);

    side.wiki.href = wikiHref(e.name);
    if(focus) side.media.scrollIntoView({behavior:'smooth', block:'nearest'});
  }

  function kvItem(label, val){
    const d = document.createElement('div');
    d.innerHTML = `<b>${label}</b>${val}`;
    d.style.opacity = '0';
    d.style.transform = 'translateY(10px)';
    setTimeout(() => {
      d.style.transition = 'all 0.3s ease';
      d.style.opacity = '1';
      d.style.transform = 'translateY(0)';
    }, 100);
    return d;
  }

  // Solubility data (very condensed guideline-style)
  const SOL = [
    {compound:'Nitrates (NO₃⁻)', rule:'All soluble', note:'No common exceptions', badge:'✅'},
    {compound:'Acetates (CH₃COO⁻)', rule:'All soluble', note:'AgCH₃COO slightly soluble', badge:'✅'},
    {compound:'Group 1 salts', rule:'All soluble', note:'Li⁺ sometimes slightly less', badge:'✅'},
    {compound:'Ammonium (NH₄⁺) salts', rule:'All soluble', note:'—', badge:'✅'},
    {compound:'Chlorides/Bromides/Iodides', rule:'Mostly soluble', note:'Insoluble with Ag⁺, Pb²⁺, Hg₂²⁺', badge:'⚠️'},
    {compound:'Sulfates (SO₄²⁻)', rule:'Mostly soluble', note:'Insoluble with Ba²⁺, Pb²⁺, Ca²⁺, Sr²⁺', badge:'⚠️'},
    {compound:'Carbonates/Phosphates', rule:'Mostly insoluble', note:'Except Group 1 and NH₄⁺', badge:'⛔'},
    {compound:'Hydroxides', rule:'Mostly insoluble', note:'Soluble: Group 1, Ca²⁺ (slightly), Sr²⁺, Ba²⁺', badge:'⛔'},
    {compound:'Sulfides', rule:'Mostly insoluble', note:'Soluble: Group 1, Group 2, NH₄⁺', badge:'⛔'}
  ];

  function renderSolubility(){
    const t = document.getElementById('sol-table');
    t.innerHTML = `<tr><th>Class</th><th>Rule</th><th>Notes</th><th>Status</th></tr>` +
      SOL.map(r=>`<tr><td>${r.compound}</td><td>${r.rule}</td><td>${r.note}</td><td><span class="badge">${r.badge}</span></td></tr>`).join('');
  }

  // Search & filter
  const search = document.getElementById('search');
  const category = document.getElementById('category');
  const resetBtn = document.getElementById('btn-reset');
  const solBtn = document.getElementById('btn-sol');
  const solDialog = document.getElementById('sol-modal');
  const solClose = document.getElementById('sol-close');

  function applyFilters(){
    renderGrid({q:search.value, cat:category.value});
  }

  search.addEventListener('input', applyFilters);
  category.addEventListener('change', applyFilters);
  resetBtn.addEventListener('click', ()=>{ 
    search.value=''; 
    category.value=''; 
    document.querySelectorAll('.tag').forEach(t => t.classList.remove('active'));
    applyFilters();
  });

  solBtn.addEventListener('click', ()=>{ renderSolubility(); solDialog.showModal(); });
  solClose.addEventListener('click', ()=> solDialog.close());

  document.getElementById('copy').addEventListener('click', async ()=>{
    const txt = `${side.title.textContent} — ${side.sum.textContent}`;
    try{ 
      await navigator.clipboard.writeText(txt); 
      toast('Copied element summary'); 
    }
    catch{ toast('Copy failed'); }
  });

  // Keyboard navigation
  document.addEventListener('keydown', (e)=>{
    const focusEl = document.activeElement.closest('.el');
    if(!focusEl) return;
    const idx = Array.from(document.querySelectorAll('.el')).indexOf(focusEl);
    if(idx<0) return;
    const cols = 18;
    if(['ArrowRight','ArrowLeft','ArrowDown','ArrowUp'].includes(e.key)) e.preventDefault();
    function move(delta){
      const all = Array.from(document.querySelectorAll('.el'));
      let n = idx + delta;
      n = Math.max(0, Math.min(all.length-1, n));
      all[n].focus(); 
      all[n].scrollIntoView({block:'nearest', behavior: 'smooth'});
    }
    if(e.key==='ArrowRight') move(1);
    if(e.key==='ArrowLeft') move(-1);
    if(e.key==='ArrowDown') move(cols);
    if(e.key==='ArrowUp') move(-cols);
    if(e.key==='Enter'){ const Z = Number(focusEl.dataset.z); selectElement(Z,true); }
    if(e.key==='Escape'){ search.focus(); }
  });

  function toast(msg){
    const t = document.createElement('div');
    t.className = 'toast';
    t.textContent = msg;
    document.body.appendChild(t);
    
    // Animate in
    setTimeout(() => {
      t.style.transform = 'translateX(-50%) translateY(0)';
    }, 10);
    
    // Animate out and remove
    setTimeout(() => {
      t.style.transform = 'translateX(-50%) translateY(100px)';
      setTimeout(() => {
        if (t.parentNode) {
          t.parentNode.removeChild(t);
        }
      }, 300);
    }, 1400);
  }

  // Init
  makeLegend();
  renderGrid({});
  selectElement(1);
  
  // Add initial animation to elements
  setTimeout(() => {
    document.querySelectorAll('.el').forEach((el, i) => {
      el.style.animationDelay = `${i * 10}ms`;
      el.style.animation = 'elementAppear 0.5s ease forwards';
    });
  }, 100);
  </script>
</body>
</html>
